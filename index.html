<!DOCTYPE html>
<html lang="en">
<!-- Previous head and style sections remain the same -->
<head>
    <!-- Previous styles remain identical -->
    <style>
        /* Previous styles remain identical */
        .minimum-questions {
            color: #ffd700;
            font-weight: bold;
            margin-top: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="game-title">Minecraft Past Tense Adventure</h1>
        <div class="stats">
            <span>Score: <span id="score">0</span></span>
            <span>Correct Answers: <span id="correctAnswers" class="correct-counter">0</span>/50</span>
            <span>Question: <span id="questionNumber">1</span>/150</span>
            <span>Hearts: <span id="hearts">❤️❤️❤️</span></span>
        </div>
        <div class="minimum-questions" id="minimumQuestions"></div>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div id="questionContainer" class="question-container">
            <!-- Questions will be inserted here -->
        </div>
        <div id="feedback" class="feedback hidden"></div>
    </div>

    <script>
        // Previous questions array remains the same

        let currentQuestion = 0;
        let score = 0;
        let hearts = 3;
        let correctAnswers = 0;
        const MINIMUM_QUESTIONS = 50;

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('hearts').textContent = '❤️'.repeat(hearts);
            document.getElementById('correctAnswers').textContent = correctAnswers;
            const progress = (currentQuestion / questions.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
            
            // Update minimum questions message
            const questionsRemaining = Math.max(0, MINIMUM_QUESTIONS - (currentQuestion + 1));
            if (questionsRemaining > 0) {
                document.getElementById('minimumQuestions').textContent = 
                    `You must answer at least ${questionsRemaining} more questions before winning!`;
            } else {
                document.getElementById('minimumQuestions').textContent = 
                    `You can win now if you have 50 correct answers!`;
            }
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            container.innerHTML = `
                <h2>${question.question}</h2>
                <div class="options">
                    ${question.options.map((option, index) => `
                        <button class="option" onclick="checkAnswer(${index})">${option}</button>
                    `).join('')}
                </div>
            `;
            document.getElementById('feedback').classList.add('hidden');
            updateStats();
        }

        function checkAnswer(selectedIndex) {
            const question = questions[currentQuestion];
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('hidden');

            if (selectedIndex === question.correct) {
                score += 10;
                correctAnswers++;
                feedback.textContent = "Correct! Like finding diamonds! ⛏️";
                feedback.className = 'feedback correct';
                
                // Check for win condition only if minimum questions have been answered
                if (correctAnswers >= 50 && currentQuestion + 1 >= MINIMUM_QUESTIONS) {
                    setTimeout(() => {
                        alert(`Congratulations! You've won the game with ${correctAnswers} correct answers! Final score: ${score}`);
                        resetGame();
                    }, 1000);
                    return;
                }
            } else {
                hearts--;
                feedback.textContent = "Oops! That's like taking damage! The correct answer was: " + 
                    question.options[question.correct];
                feedback.className = 'feedback incorrect';
            }

            updateStats();

            if (hearts <= 0) {
                setTimeout(() => {
                    alert("Game Over! You ran out of hearts! Final score: " + score);
                    resetGame();
                }, 1000);
                return;
            }

            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion >= questions.length) {
                    if (correctAnswers >= 50) {
                        alert(`Congratulations! You've completed the quiz with ${correctAnswers} correct answers! Final score: ${score}`);
                    } else {
                        alert(`Quiz completed, but you need 50 correct answers to win! You got: ${correctAnswers}`);
                    }
                    resetGame();
                } else {
                    showQuestion();
                }
            }, 1500);
        }

        function resetGame() {
            currentQuestion = 0;
            score = 0;
            hearts = 3;
            correctAnswers = 0;
            showQuestion();
        }

        // Start the game
        showQuestion();
    </script>
</body>
</html>
